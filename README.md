
# Telegram Bot для Рассылки Контента

Этот Telegram бот предназначен для создания системы рассылки контента подписчикам. Бот позволяет пользователям подписываться на рассылку, а администраторам отправлять контент всем подписчикам одновременно.

## Особенности

- 📝 **Подписка на рассылку** - пользователи могут легко подписаться/отписаться
- 📤 **Массовая рассылка** - отправка контента всем подписчикам одной командой
- 🗑️ **Удаление сообщений** - возможность удалить последнее отправленное сообщение у всех пользователей
- 📊 **Сохранение данных** - автоматическое сохранение информации о подписчиках в JSON файлах
- 🔒 **Система прав** - разделение на обычных пользователей и администраторов
- 🎥 **Поддержка медиа** - отправка видео, фото и текстовых сообщений

## Установка и настройка

### Требования

- Python 3.7+
- aiogram 3.x

### Установка зависимостей

```bash
pip install aiogram aiohttp
```

### Настройка

1. **Получите токен бота** от [@BotFather](https://t.me/BotFather) в Telegram
2. **Замените токен** в коде:
   ```python
   API_TOKEN = 'ВАШ_ТОКЕН_БОТА'
   ```
3. **Укажите ID администраторов** в списке `ADMIN_IDS`:
   ```python
   ADMIN_IDS = [ваш_user_id, другой_admin_id]
   ```

### Запуск

```bash
python bot.py
```

## Использование

### Команды для пользователей

- `/start` - Начать работу с ботом и подписаться на рассылку
- `/stop` - Отписаться от рассылки

### Команды для администраторов

- `/send_video` - Отправить контент всем подписчикам (ответом на сообщение)
- `/del_last` - Удалить последнее отправленное сообщение у всех подписчиков

## Функциональность

### Подписка на рассылку

1. Пользователь отправляет команду `/start`
2. Бот отображает приветственное сообщение с кнопкой подписки
3. При нажатии на кнопку пользователь добавляется в список подписчиков

### Отправка рассылки

1. Администратор отправляет команду `/send_video` в ответ на сообщение с контентом
2. Бот отправляет это сообщение всем подписчикам
3. ID последних отправленных сообщений сохраняются для возможного удаления

### Поддерживаемые типы контента

- 🎥 **Видео** - отправка видеофайлов с подписью
- 📷 **Фото** - отправка изображений с подписью  
- 💬 **Текст** - отправка текстовых сообщений

### Удаление сообщений

Администратор может удалить последнее отправленное сообщение у всех подписчиков командой `/del_last`.

## Структура файлов

После первого запуска создаются следующие файлы:

- `subscribers.json` - список подписчиков рассылки
- `user_data.json` - данные пользователей (ID, имя, никнейм)
- `last_messages.json` - ID последних отправленных сообщений

## Структура проекта

```
telegram-bot/
├── bot.py              # Основной файл бота
├── subscribers.json    # Список подписчиков (создается автоматически)
├── user_data.json     # Данные пользователей (создается автоматически)
├── last_messages.json # ID последних сообщений (создается автоматически)
└── README.md          # Документация
```

## Безопасность

- Права администратора проверяются по ID пользователя
- Все данные хранятся локально в JSON файлах
- Обработка ошибок при отправке сообщений

## Возможные улучшения

- [ ] Добавить поддержку документов и аудио
- [ ] Реализовать категории рассылок
- [ ] Добавить статистику рассылок
- [ ] Создать веб-интерфейс для администраторов
- [ ] Добавить планировщик отложенных сообщений
- [ ] Реализовать базу данных вместо JSON файлов

## Обработка ошибок

Бот включает обработку следующих ошибок:
- Ошибки при отправке сообщений заблокировавшим бота пользователям
- Ошибки при удалении уже удаленных сообщений
- Ошибки чтения/записи JSON файлов

## Лицензия

Этот проект распространяется свободно. Вы можете использовать, изменять и распространять код по своему усмотрению.

## Поддержка

При возникновении вопросов или проблем:
1. Проверьте правильность токена бота
2. Убедитесь в корректности ID администраторов
3. Проверьте права на запись файлов в папке проекта

---

**Важно**: Не забудьте заменить `API_TOKEN` на реальный токен вашего бота и добавить свой ID в список `ADMIN_IDS`.
>>>>>>> Stashed changes